==55891== Memcheck, a memory error detector
==55891== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==55891== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==55891== Command: lua run.lua
==55891== 
--55891-- /Users/hnakamur/mysrc/luvit/lua-nkf-native/nkf.so:
--55891-- dSYM directory is missing; consider using --dsymutil=yes
==55891== Invalid read of size 8
==55891==    at 0x7FFF5FC209E6: strlcpy (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC1833A: ImageLoaderMachOCompressed::instantiateFromFile(char const*, int, unsigned char const*, unsigned long long, unsigned long long, stat const&, unsigned int, unsigned int, linkedit_data_command const*, ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC113A6: ImageLoaderMachO::instantiateFromFile(char const*, int, unsigned char const*, unsigned long long, unsigned long long, stat const&, ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC05A8A: dyld::loadPhase6(int, stat const&, char const*, dyld::LoadContext const&) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC05E26: dyld::loadPhase5(char const*, char const*, dyld::LoadContext const&, std::vector<char const*, std::allocator<char const*> >*) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC0607E: dyld::loadPhase4(char const*, char const*, dyld::LoadContext const&, std::vector<char const*, std::allocator<char const*> >*) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC067A0: dyld::loadPhase3(char const*, char const*, dyld::LoadContext const&, std::vector<char const*, std::allocator<char const*> >*) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC06AB1: dyld::loadPhase1(char const*, char const*, dyld::LoadContext const&, std::vector<char const*, std::allocator<char const*> >*) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC06BD4: dyld::loadPhase0(char const*, char const*, dyld::LoadContext const&, std::vector<char const*, std::allocator<char const*> >*) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC06CEA: dyld::load(char const*, dyld::LoadContext const&) (in /usr/lib/dyld)
==55891==    by 0x7FFF5FC095C9: dlopen (in /usr/lib/dyld)
==55891==    by 0x13D95A: dlopen (in /usr/lib/system/libdyld.dylib)
==55891==  Address 0x100019380 is 32 bytes inside a block of size 33 alloc'd
==55891==    at 0x4DC7: malloc (vg_replace_malloc.c:266)
==55891==    by 0x5318: realloc (vg_replace_malloc.c:635)
==55891==    by 0x126B3: luaM_realloc_ (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x15CDF: luaS_newlstr (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xB193: lua_pushlstring (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x19621: emptybuffer (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x19E0D: luaL_gsub (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x21E9A: findfile (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x221AC: loader_C (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xF7FA: luaD_precall (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xF88D: luaD_call (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xB592: lua_call (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891== 
こんにちは
GyRCJDMkcyRLJEEkTxsoQg==
こんにちは
==55891== 
==55891== HEAP SUMMARY:
==55891==     in use at exit: 9,913 bytes in 42 blocks
==55891==   total heap usage: 555 allocs, 513 frees, 54,535 bytes allocated
==55891== 
==55891== 1,184 (40 direct, 1,144 indirect) bytes in 1 blocks are definitely lost in loss record 16 of 18
==55891==    at 0x4DC7: malloc (vg_replace_malloc.c:266)
==55891==    by 0x3E108F: ???
==55891==    by 0x3DD7DE: ???
==55891==    by 0xF7FA: luaD_precall (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x17E2A: luaV_execute (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xF89E: luaD_call (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xEFF6: luaD_rawrunprotected (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xF062: luaD_pcall (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0xB485: lua_pcall (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891==    by 0x100001265: docall (in /usr/local/bin/lua)
==55891==    by 0x10000118F: pmain (in /usr/local/bin/lua)
==55891==    by 0xF7FA: luaD_precall (in /usr/local/Cellar/lua/5.1.4/lib/liblua.5.1.4.dylib)
==55891== 
==55891== LEAK SUMMARY:
==55891==    definitely lost: 40 bytes in 1 blocks
==55891==    indirectly lost: 1,144 bytes in 6 blocks
==55891==      possibly lost: 0 bytes in 0 blocks
==55891==    still reachable: 8,729 bytes in 35 blocks
==55891==         suppressed: 0 bytes in 0 blocks
==55891== Reachable blocks (those to which a pointer was found) are not shown.
==55891== To see them, rerun with: --leak-check=full --show-reachable=yes
==55891== 
==55891== For counts of detected and suppressed errors, rerun with: -v
==55891== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 1 from 1)
